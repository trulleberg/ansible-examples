---
- hosts: localhost
  connection: local
  gather_facts: true
  name: "Convert human inputs to bytes for proper volume sizes."

  tasks:
    - name: "Create local vars"
      ansible.builtin.set_fact:
        sizes:
          - "125GB"
          - "1.5 GB"
          - "1 TB"
          - "2.5TB"
          - "3t"
          - "125G"
          - "125GB"
          - "125"
        reserve: 10

    - name: Debug                                                                                                       #https://docs.saltproject.io/en/master/topics/jinja/index.html
      ansible.builtin.debug:
        msg:                        "Input: {{ item }}, value in bytes: {{ (item | human_to_bytes(default_unit='GB') / ( 1 - ( reserve / 100 )) | round(0,'ceil') )| int }}"
      loop: "{{ sizes }}"
